<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="é’æ‰"><meta name="copyright" content="é’æ‰"><meta name="generator" content="Hexo 6.2.0"><meta name="theme" content="hexo-theme-yun"><title>Spring IoC | huafoog</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.3.3/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"huafoog.github.io","root":"/","title":"é’æ‰","version":"1.10.4","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"æœç´¢...","empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits":"æ‰¾åˆ° ${hits} æ¡ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn/?c=i","hitokoto":true},"fireworks":{"colors":null},"vendors":{"darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><meta name="description" content="å‰è¨€ æ·±å…¥ç†è§£DIPã€IoCã€DIä»¥åŠIoCå®¹å™¨ï¼šhttps:&#x2F;&#x2F;www.cnblogs.com&#x2F;liuhaorain&#x2F;p&#x2F;3747470.html  ä¸ºä»€ä¹ˆè¦ä½¿ç”¨IOCä¼ ç»Ÿå¼€å‘æ¨¡å¼çš„å¼Šç«¯ä¸‰å±‚æ¶æ„æ˜¯ç»å…¸çš„å¼€å‘æ¨¡å¼ï¼Œæˆ‘ä»¬ä¸€èˆ¬å°†è§†å›¾æ§åˆ¶ã€ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“æ“ä½œåˆ†åˆ«æŠ½ç¦»å‡ºæ¥å•ç‹¬å½¢æˆä¸€ä¸ªç±»ï¼Œè¿™æ ·å„ä¸ªèŒè´£å°±éå¸¸æ¸…æ™°ä¸”æ˜“äºå¤ç”¨å’Œç»´æŠ¤ã€‚å¤§è‡´ä»£ç å¦‚ä¸‹ï¼š ç”¨æˆ·DAO 123456789101112public cla">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring IoC">
<meta property="og:url" content="https://huafoog.github.io/p/d0d8b63c11ae.html">
<meta property="og:site_name" content="huafoog">
<meta property="og:description" content="å‰è¨€ æ·±å…¥ç†è§£DIPã€IoCã€DIä»¥åŠIoCå®¹å™¨ï¼šhttps:&#x2F;&#x2F;www.cnblogs.com&#x2F;liuhaorain&#x2F;p&#x2F;3747470.html  ä¸ºä»€ä¹ˆè¦ä½¿ç”¨IOCä¼ ç»Ÿå¼€å‘æ¨¡å¼çš„å¼Šç«¯ä¸‰å±‚æ¶æ„æ˜¯ç»å…¸çš„å¼€å‘æ¨¡å¼ï¼Œæˆ‘ä»¬ä¸€èˆ¬å°†è§†å›¾æ§åˆ¶ã€ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“æ“ä½œåˆ†åˆ«æŠ½ç¦»å‡ºæ¥å•ç‹¬å½¢æˆä¸€ä¸ªç±»ï¼Œè¿™æ ·å„ä¸ªèŒè´£å°±éå¸¸æ¸…æ™°ä¸”æ˜“äºå¤ç”¨å’Œç»´æŠ¤ã€‚å¤§è‡´ä»£ç å¦‚ä¸‹ï¼š ç”¨æˆ·DAO 123456789101112public cla">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://images.cnblogs.com/cnblogs_com/qs315/2071952/o_211215060522_111.jpg">
<meta property="article:published_time" content="2021-12-01T08:39:43.691Z">
<meta property="article:modified_time" content="2021-12-15T06:07:37.402Z">
<meta property="article:author" content="é’æ‰">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://images.cnblogs.com/cnblogs_com/qs315/2071952/o_211215060522_111.jpg"><script>(function() {
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="é’æ‰"><img width="96" loading="lazy" src="/images/avatar.jpg" alt="é’æ‰"><span class="site-author-status" title="ä¸Šå·">ğŸ˜‰</span></a><div class="site-author-name"><a href="/about/">é’æ‰</a></div><span class="site-name">huafoog</span><sub class="site-subtitle"></sub><div class="site-description"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="é¦–é¡µ"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">13</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">6</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">10</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="æ–‡æ¡£"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:settings-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:genderless-line"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8IOC"><span class="toc-number">2.</span> <span class="toc-text">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨IOC</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E7%BB%9F%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%BC%8A%E7%AB%AF"><span class="toc-number">2.1.</span> <span class="toc-text">ä¼ ç»Ÿå¼€å‘æ¨¡å¼çš„å¼Šç«¯</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring-IoC%E5%AE%B9%E5%99%A8"><span class="toc-number">3.</span> <span class="toc-text">Spring IoCå®¹å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#BeanFactory-%E5%AE%B9%E5%99%A8"><span class="toc-number">3.1.</span> <span class="toc-text">BeanFactory å®¹å™¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ApplicationContext-%E5%AE%B9%E5%99%A8"><span class="toc-number">3.2.</span> <span class="toc-text">ApplicationContext å®¹å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ClassPathXmlApplicationContext"><span class="toc-number">3.2.1.</span> <span class="toc-text">ClassPathXmlApplicationContext</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FileSystemXmlApplicationContext"><span class="toc-number">3.2.2.</span> <span class="toc-text">FileSystemXmlApplicationContext</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring-Bean%E5%AE%9A%E4%B9%89"><span class="toc-number">4.</span> <span class="toc-text">Spring Beanå®šä¹‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring-Bean%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">5.</span> <span class="toc-text">Spring Beanä½œç”¨åŸŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E7%9A%84%E7%A7%8D%E7%B1%BB"><span class="toc-number">5.1.</span> <span class="toc-text">ä½œç”¨åŸŸçš„ç§ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#singleton"><span class="toc-number">5.1.0.1.</span> <span class="toc-text">singleton</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90"><span class="toc-number">5.1.0.1.1.</span> <span class="toc-text">ä¾‹å­</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#prototype"><span class="toc-number">5.1.0.2.</span> <span class="toc-text">prototype</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90-1"><span class="toc-number">5.1.0.2.1.</span> <span class="toc-text">ä¾‹å­</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring-Bean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">6.</span> <span class="toc-text">Spring Beanç”Ÿå‘½å‘¨æœŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-Bean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-number">6.1.</span> <span class="toc-text">Spring Beanç”Ÿå‘½å‘¨æœŸæ‰§è¡Œæµç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9B%9E%E8%B0%83"><span class="toc-number">6.1.0.1.</span> <span class="toc-text">åˆå§‹åŒ–å›è°ƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3"><span class="toc-number">6.1.0.2.</span> <span class="toc-text">ä½¿ç”¨æ¥å£</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEXML"><span class="toc-number">6.1.0.3.</span> <span class="toc-text">é…ç½®XML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="toc-number">6.1.0.4.</span> <span class="toc-text">ä½¿ç”¨æ³¨è§£</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%80%E6%AF%81%E5%9B%9E%E8%B0%83"><span class="toc-number">6.1.1.</span> <span class="toc-text">é”€æ¯å›è°ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3-1"><span class="toc-number">6.1.1.1.</span> <span class="toc-text">ä½¿ç”¨æ¥å£</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEXML-1"><span class="toc-number">6.1.1.2.</span> <span class="toc-text">é…ç½®XML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3-1"><span class="toc-number">6.1.1.3.</span> <span class="toc-text">ä½¿ç”¨æ³¨è§£</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">6.1.1.4.</span> <span class="toc-text">ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E9%94%80%E6%AF%81%E6%96%B9%E6%B3%95"><span class="toc-number">6.1.1.5.</span> <span class="toc-text">é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#BeanPostProcessor%EF%BC%88Spring%E5%90%8E%E7%BD%AE%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%89"><span class="toc-number">7.</span> <span class="toc-text">BeanPostProcessorï¼ˆSpringåç½®å¤„ç†å™¨ï¼‰</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="https://huafoog.github.io/p/d0d8b63c11ae.html"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="é’æ‰"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="huafoog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Spring IoC</h1><div class="post-meta"><div class="post-time"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <time title="åˆ›å»ºæ—¶é—´ï¼š2021-12-01 16:39:43" itemprop="dateCreated datePublished" datetime="2021-12-01T16:39:43+08:00">2021-12-01</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-12-15 14:07:37" itemprop="dateModified" datetime="2021-12-15T14:07:37+08:00">2021-12-15</time></div><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/spring/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">spring</span></a></span></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/liuhaorain/p/3747470.html">æ·±å…¥ç†è§£DIPã€IoCã€DIä»¥åŠIoCå®¹å™¨</a>ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/liuhaorain/p/3747470.html">https://www.cnblogs.com/liuhaorain/p/3747470.html</a></p>
</blockquote>
<h1 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨IOC"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨IOC" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨IOC"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨IOC</h1><h2 id="ä¼ ç»Ÿå¼€å‘æ¨¡å¼çš„å¼Šç«¯"><a href="#ä¼ ç»Ÿå¼€å‘æ¨¡å¼çš„å¼Šç«¯" class="headerlink" title="ä¼ ç»Ÿå¼€å‘æ¨¡å¼çš„å¼Šç«¯"></a>ä¼ ç»Ÿå¼€å‘æ¨¡å¼çš„å¼Šç«¯</h2><p>ä¸‰å±‚æ¶æ„æ˜¯ç»å…¸çš„å¼€å‘æ¨¡å¼ï¼Œæˆ‘ä»¬ä¸€èˆ¬å°†è§†å›¾æ§åˆ¶ã€ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“æ“ä½œåˆ†åˆ«æŠ½ç¦»å‡ºæ¥å•ç‹¬å½¢æˆä¸€ä¸ªç±»ï¼Œè¿™æ ·å„ä¸ªèŒè´£å°±éå¸¸æ¸…æ™°ä¸”æ˜“äºå¤ç”¨å’Œç»´æŠ¤ã€‚å¤§è‡´ä»£ç å¦‚ä¸‹ï¼š</p>
<p>ç”¨æˆ·DAO</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDAO</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String database;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserDAO</span><span class="params">(String dataBase)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.database = dataBase;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¿å­˜ç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”¨æˆ·Service</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserDAO dao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserService</span><span class="params">(UserDAO dao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dao = dao;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span> &#123;</span><br><span class="line">        dao.doSomething();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”¨æˆ·Controller</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class Controller &#123;</span><br><span class="line"></span><br><span class="line">    public UserService service;</span><br><span class="line"></span><br><span class="line">    public Controller(UserService userService) &#123;</span><br><span class="line">        this.service = userService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void doSomething() &#123;</span><br><span class="line">        service.doSomething();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¿…é¡»æ‰‹åŠ¨ä¸€ä¸ªä¸€ä¸ªåˆ›å»ºå¯¹è±¡ï¼Œå¹¶å°†daoã€serviceã€controllerä¾æ¬¡ç»„è£…èµ·æ¥ï¼Œç„¶åæ‰èƒ½è°ƒç”¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">UserDAO</span> <span class="variable">dao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDAO</span>(<span class="string">&quot;mysql&quot;</span>);</span><br><span class="line">    <span class="type">UserService</span> <span class="variable">service</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserService</span>(dao);</span><br><span class="line">    <span class="type">Controller</span> <span class="variable">controller</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Controller</span>(service);</span><br><span class="line"></span><br><span class="line">    controller.doSomething();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ†æä¸€ä¸‹è¿™ç§åšæ³•çš„å¼Šç«¯æœ‰å“ªäº›å‘¢ï¼Ÿ</p>
<ol>
<li>åœ¨ç”ŸæˆControllerçš„åœ°æ–¹æˆ‘ä»¬éƒ½å¿…é¡»å…ˆåˆ›å»ºdaoå†åˆ›å»ºserviceæœ€åå†åˆ›å»ºController,è¿™ä¹ˆä¸€æ¡ç¹ççš„åˆ›å»ºè¿‡ç¨‹ã€‚</li>
<li>åœ¨è¿™ä¸‰å±‚ç»“æ„å½“ä¸­ï¼Œä¸Šå±‚éƒ½éœ€è¦çŸ¥é“ä¸‹å±‚æ˜¯å¦‚ä½•åˆ›å»ºçš„ï¼Œä¸Šå±‚å¿…é¡»è‡ªå·±åˆ›å»ºä¸‹å±‚ï¼Œè¿™æ ·å°±å½¢æˆäº†ç´§å¯†è€¦åˆã€‚ä¸ºä»€ä¹ˆä¸šåŠ¡ç¨‹åºå‘˜åœ¨å†™ä¸šåŠ¡çš„æ—¶å€™å´éœ€è¦çŸ¥é“æ•°æ®åº“çš„å¯†ç å¹¶è‡ªå·±åˆ›å»ºdaoå‘¢ï¼Ÿä¸ä»…å¦‚æ­¤ï¼Œå½“å¦‚æœdaoçš„æ•°æ®åº“å¯†ç å˜åŒ–äº†ï¼Œåœ¨æ¯ä¸€å¤„ç”ŸæˆControllerçš„åœ°æ–¹éƒ½éœ€è¦è¿›è¡Œä¿®æ”¹ã€‚</li>
<li>é€šè¿‡newå…³é”®å­—ç”Ÿæˆäº†å…·ä½“çš„å¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ç§ç¡¬ç¼–ç çš„æ–¹å¼ï¼Œè¿åäº†é¢å‘æ¥å£ç¼–ç¨‹çš„åŸåˆ™ã€‚å½“æœ‰ä¸€å¤©æˆ‘ä»¬ä»Hibernateæ›´æ¢åˆ°Mybatisçš„æ—¶å€™,åœ¨æ¯ä¸€å¤„new DAOçš„åœ°æ–¹ï¼Œæˆ‘ä»¬éƒ½éœ€è¦è¿›è¡Œæ›´æ¢ã€‚</li>
<li>æˆ‘ä»¬é¢‘ç¹çš„åˆ›å»ºå¯¹è±¡ï¼Œæµªè´¹äº†èµ„æºã€‚</li>
</ol>
<p>è¿™æ—¶å€™æˆ‘ä»¬å†æ¥çœ‹çœ‹å¦‚æœç”¨SpringIOCçš„æƒ…å†µï¼Œåˆšæ‰çš„ä»£ç å˜æˆå¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;classpath:application.xml&quot;</span>);</span><br><span class="line">        <span class="type">Controller</span> <span class="variable">controller</span> <span class="operator">=</span> (Controller) context.getBean(<span class="string">&quot;controller&quot;</span>);</span><br><span class="line">        controller.doSomething();</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>å¾ˆæ˜æ˜¾ï¼Œä½¿ç”¨IOCä¹‹åï¼Œæˆ‘ä»¬åªç®¡å‘å®¹å™¨ç´¢å–æ‰€éœ€çš„Beanå³å¯ã€‚IOCä¾¿è§£å†³äº†ä»¥ä¸‹çš„ç—›ç‚¹:</p>
<ol>
<li>Beanä¹‹é—´çš„è§£è€¦ï¼Œè¿™ç§è§£è€¦ä½“ç°åœ¨æˆ‘ä»¬æ²¡æœ‰åœ¨ä»£ç ä¸­å»ç¡¬ç¼–ç beanä¹‹é—´çš„ä¾èµ–ã€‚ï¼ˆä¸é€šè¿‡newæ“ä½œä¾æ¬¡æ„å»ºå¯¹è±¡ï¼Œç”±springIOCå†…éƒ¨å¸®åŠ©æˆ‘ä»¬å®ç°äº†ä¾èµ–æ³¨å…¥ï¼‰ã€‚ä¸€æ–¹é¢ï¼ŒIOCå®¹å™¨å°†é€šè¿‡newå¯¹è±¡è®¾ç½®ä¾èµ–çš„æ–¹å¼è½¬å˜ä¸ºè¿è¡ŒæœŸåŠ¨æ€çš„è¿›è¡Œè®¾ç½®ä¾èµ–ã€‚</li>
<li>IOCå®¹å™¨å¤©ç„¶åœ°ç»™æˆ‘ä»¬æä¾›äº†å•ä¾‹ã€‚</li>
<li>å½“éœ€è¦æ›´æ¢daoçš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ›´æ¢daoçš„å®ç°ç±»ï¼Œå®Œå…¨ä¸ä¼šç ´ååˆ°ä¹‹å‰çš„ä»£ç ã€‚</li>
<li>ä¸Šå±‚ç°åœ¨ä¸éœ€è¦çŸ¥é“ä¸‹å±‚æ˜¯å¦‚ä½•åˆ›å»ºçš„ã€‚</li>
</ol>
<h1 id="Spring-IoCå®¹å™¨"><a href="#Spring-IoCå®¹å™¨" class="headerlink" title="Spring IoCå®¹å™¨"></a>Spring IoCå®¹å™¨</h1><p>IoCå®¹å™¨æ˜¯Springçš„æ ¸å¿ƒï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºSpringå®¹å™¨ã€‚Spring é€šè¿‡ IoC å®¹å™¨æ¥ç®¡ç†å¯¹è±¡çš„å®ä¾‹åŒ–å’Œåˆå§‹åŒ–ï¼Œä»¥åŠå¯¹è±¡ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>Spring ä¸­ä½¿ç”¨çš„å¯¹è±¡éƒ½ç”± IoC å®¹å™¨ç®¡ç†ï¼Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ä½¿ç”¨ new è¿ç®—ç¬¦åˆ›å»ºå¯¹è±¡ã€‚ç”± IoC å®¹å™¨ç®¡ç†çš„å¯¹è±¡ç§°ä¸º Spring Beanï¼ŒSpring Bean å°±æ˜¯ Java å¯¹è±¡ï¼Œå’Œä½¿ç”¨ new è¿ç®—ç¬¦åˆ›å»ºçš„å¯¹è±¡æ²¡æœ‰åŒºåˆ«ã€‚</p>
<p>Spring é€šè¿‡è¯»å– XML æˆ– Java æ³¨è§£ä¸­çš„ä¿¡æ¯æ¥è·å–å“ªäº›å¯¹è±¡éœ€è¦å®ä¾‹åŒ–ã€‚</p>
<p>Spring æä¾› 2 ç§ä¸åŒç±»å‹çš„ IoC å®¹å™¨ï¼Œå³ BeanFactory å’Œ ApplicationContext å®¹å™¨ã€‚</p>
<h2 id="BeanFactory-å®¹å™¨"><a href="#BeanFactory-å®¹å™¨" class="headerlink" title="BeanFactory å®¹å™¨"></a>BeanFactory å®¹å™¨</h2><p>BeanFactory æ˜¯æœ€ç®€å•çš„å®¹å™¨ï¼Œç”± org.springframework.beans.factory.BeanFactory æ¥å£å®šä¹‰ï¼Œé‡‡ç”¨æ‡’åŠ è½½ï¼ˆlazy-loadï¼‰ï¼Œæ‰€ä»¥å®¹å™¨å¯åŠ¨æ¯”è¾ƒå¿«ã€‚BeanFactory æä¾›äº†å®¹å™¨æœ€åŸºæœ¬çš„åŠŸèƒ½ã€‚</p>
<p>ä¸ºäº†èƒ½å¤Ÿå…¼å®¹ Spring é›†æˆçš„ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼ˆå¦‚ BeanFactoryAwareã€InitializingBeanã€DisposableBeanï¼‰ï¼Œæ‰€ä»¥ç›®å‰ä»ç„¶ä¿ç•™äº†è¯¥æ¥å£ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼ŒBeanFactory å°±æ˜¯ä¸€ä¸ªç®¡ç† Bean çš„å·¥å‚ï¼Œå®ƒä¸»è¦è´Ÿè´£åˆå§‹åŒ–å„ç§ Beanï¼Œå¹¶è°ƒç”¨å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚</p>
<p>BeanFactory æ¥å£æœ‰å¤šä¸ªå®ç°ç±»ï¼Œæœ€å¸¸è§çš„æ˜¯ org.springframework.beans.factory.xml.XmlBeanFactoryã€‚ä½¿ç”¨ BeanFactory éœ€è¦åˆ›å»º XmlBeanFactory ç±»çš„å®ä¾‹ï¼Œé€šè¿‡ XmlBeanFactory ç±»çš„æ„é€ å‡½æ•°æ¥ä¼ é€’ Resource å¯¹è±¡ã€‚å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Resource resource = new ClassPathResource(&quot;applicationContext.xml&quot;); </span><br><span class="line">BeanFactory factory = new XmlBeanFactory(resource);  </span><br></pre></td></tr></table></figure>

<h2 id="ApplicationContext-å®¹å™¨"><a href="#ApplicationContext-å®¹å™¨" class="headerlink" title="ApplicationContext å®¹å™¨"></a>ApplicationContext å®¹å™¨</h2><p>ApplicationContext ç»§æ‰¿äº† BeanFactory æ¥å£ï¼Œç”± org.springframework.context.ApplicationContext æ¥å£å®šä¹‰ï¼Œå¯¹è±¡åœ¨å¯åŠ¨å®¹å™¨æ—¶åŠ è½½ã€‚ApplicationContext åœ¨ BeanFactory çš„åŸºç¡€ä¸Šå¢åŠ äº†å¾ˆå¤šä¼ä¸šçº§åŠŸèƒ½ï¼Œä¾‹å¦‚ AOPã€å›½é™…åŒ–ã€äº‹ä»¶æ”¯æŒç­‰ã€‚</p>
<p>ApplicationContext æ¥å£æœ‰ä¸¤ä¸ªå¸¸ç”¨çš„å®ç°ç±»ï¼Œå…·ä½“å¦‚ä¸‹ã€‚</p>
<h3 id="ClassPathXmlApplicationContext"><a href="#ClassPathXmlApplicationContext" class="headerlink" title="ClassPathXmlApplicationContext"></a>ClassPathXmlApplicationContext</h3><p>è¯¥ç±»ä»ç±»è·¯å¾„ ClassPath ä¸­å¯»æ‰¾æŒ‡å®šçš„ XML é…ç½®æ–‡ä»¶ï¼Œå¹¶å®Œæˆ ApplicationContext çš„å®ä¾‹åŒ–å·¥ä½œï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(String configLocation);</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼ŒconfigLocation å‚æ•°ç”¨äºæŒ‡å®š Spring é…ç½®æ–‡ä»¶çš„åç§°å’Œä½ç½®ï¼Œå¦‚ Beans.xmlã€‚</p>
<h3 id="FileSystemXmlApplicationContext"><a href="#FileSystemXmlApplicationContext" class="headerlink" title="FileSystemXmlApplicationContext"></a>FileSystemXmlApplicationContext</h3><p>è¯¥ç±»ä»æŒ‡å®šçš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ä¸­å¯»æ‰¾æŒ‡å®šçš„ XML é…ç½®æ–‡ä»¶ï¼Œå¹¶å®Œæˆ ApplicationContext çš„å®ä¾‹åŒ–å·¥ä½œï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext applicationContext = new FileSystemXmlApplicationContext(String configLocation);</span><br></pre></td></tr></table></figure>

<p>å®ƒä¸ ClassPathXmlApplicationContext çš„åŒºåˆ«æ˜¯ï¼šåœ¨è¯»å– Spring çš„é…ç½®æ–‡ä»¶æ—¶ï¼ŒFileSystemXmlApplicationContext ä¸ä¼šä»ç±»è·¯å¾„ä¸­è¯»å–é…ç½®æ–‡ä»¶ï¼Œè€Œæ˜¯é€šè¿‡å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶çš„ä½ç½®ã€‚å³ FileSystemXmlApplicationContext å¯ä»¥è·å–ç±»è·¯å¾„ä¹‹å¤–çš„èµ„æºï¼Œå¦‚â€œF:&#x2F;workspaces&#x2F;Beans.xmlâ€ã€‚</p>
<p>é€šå¸¸åœ¨ Java é¡¹ç›®ä¸­ï¼Œä¼šé‡‡ç”¨ ClassPathXmlApplicationContext ç±»å®ä¾‹åŒ– ApplicationContext å®¹å™¨çš„æ–¹å¼ï¼Œè€Œåœ¨ Web é¡¹ç›®ä¸­ï¼ŒApplicationContext å®¹å™¨çš„å®ä¾‹åŒ–å·¥ä½œä¼šäº¤ç”± Web æœåŠ¡å™¨å®Œæˆã€‚Web æœåŠ¡å™¨å®ä¾‹åŒ– ApplicationContext å®¹å™¨é€šå¸¸ä½¿ç”¨åŸºäº ContextLoaderListener å®ç°çš„æ–¹å¼ï¼Œå®ƒåªéœ€è¦åœ¨ web.xml ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æŒ‡å®šSpringé…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œæœ‰å¤šä¸ªé…ç½®æ–‡ä»¶æ—¶ï¼Œä»¥é€—å·åˆ†éš”--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--springå°†åŠ è½½springç›®å½•ä¸‹çš„applicationContext.xmlæ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span></span><br><span class="line">        classpath:spring/applicationContext.xml</span><br><span class="line">    <span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æŒ‡å®šä»¥ContextLoaderListeneræ–¹å¼å¯åŠ¨Springå®¹å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span></span><br><span class="line">        org.springframework.web.context.ContextLoaderListener</span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒBeanFactory å’Œ ApplicationContext éƒ½æ˜¯é€šè¿‡ XML é…ç½®æ–‡ä»¶åŠ è½½ Bean çš„ã€‚</p>
<p>äºŒè€…çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œå¦‚æœ Bean çš„æŸä¸€ä¸ªå±æ€§æ²¡æœ‰æ³¨å…¥ï¼Œä½¿ç”¨ BeanFacotry åŠ è½½åï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨ getBean() æ–¹æ³•æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œ ApplicationContext åˆ™ä¼šåœ¨åˆå§‹åŒ–æ—¶è‡ªæ£€ï¼Œè¿™æ ·æœ‰åˆ©äºæ£€æŸ¥æ‰€ä¾èµ–çš„å±æ€§æ˜¯å¦æ³¨å…¥ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œé€šå¸¸éƒ½é€‰æ‹©ä½¿ç”¨ ApplicationContextï¼Œåªæœ‰åœ¨ç³»ç»Ÿèµ„æºè¾ƒå°‘æ—¶ï¼Œæ‰è€ƒè™‘ä½¿ç”¨ BeanFactoryã€‚</p>
<h1 id="Spring-Beanå®šä¹‰"><a href="#Spring-Beanå®šä¹‰" class="headerlink" title="Spring Beanå®šä¹‰"></a>Spring Beanå®šä¹‰</h1><p>ç”± Spring IoC å®¹å™¨ç®¡ç†çš„å¯¹è±¡ç§°ä¸º Beanï¼ŒBean æ ¹æ® Spring é…ç½®æ–‡ä»¶ä¸­çš„ä¿¡æ¯åˆ›å»ºã€‚</p>
<p>å¯ä»¥æŠŠ Spring IoC å®¹å™¨çœ‹ä½œæ˜¯ä¸€ä¸ªå¤§å·¥å‚ï¼ŒBean ç›¸å½“äºå·¥å‚çš„äº§å“ï¼Œå¦‚æœå¸Œæœ›è¿™ä¸ªå¤§å·¥å‚ç”Ÿäº§å’Œç®¡ç† Beanï¼Œåˆ™éœ€è¦å‘Šè¯‰å®¹å™¨éœ€è¦å“ªäº› Beanï¼Œä»¥åŠéœ€è¦å“ªç§æ–¹å¼è£…é… Beanã€‚</p>
<p>Spring é…ç½®æ–‡ä»¶æ”¯æŒä¸¤ç§æ ¼å¼ï¼Œå³ XML æ–‡ä»¶æ ¼å¼å’Œ Properties æ–‡ä»¶æ ¼å¼ã€‚</p>
<ul>
<li>Properties é…ç½®æ–‡ä»¶ä¸»è¦ä»¥ key-value é”®å€¼å¯¹çš„å½¢å¼å­˜åœ¨ï¼Œåªèƒ½èµ‹å€¼ï¼Œä¸èƒ½è¿›è¡Œå…¶ä»–æ“ä½œï¼Œé€‚ç”¨äºç®€å•çš„å±æ€§é…ç½®ã€‚</li>
<li>XML é…ç½®æ–‡ä»¶æ˜¯æ ‘å½¢ç»“æ„ï¼Œç›¸å¯¹äº Properties æ–‡ä»¶æ¥è¯´æ›´åŠ çµæ´»ã€‚XML é…ç½®æ–‡ä»¶ç»“æ„æ¸…æ™°ï¼Œä½†æ˜¯å†…å®¹æ¯”è¾ƒç¹çï¼Œé€‚ç”¨äºå¤§å‹å¤æ‚çš„é¡¹ç›®ã€‚</li>
</ul>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼ŒSpring çš„é…ç½®æ–‡ä»¶ä½¿ç”¨ XML æ ¼å¼ã€‚XML é…ç½®æ–‡ä»¶çš„æ ¹å…ƒç´ æ˜¯ <code>&lt;beans&gt;</code>ï¼Œè¯¥å…ƒç´ åŒ…å«äº†å¤šä¸ªå­å…ƒç´  <code>&lt;bean&gt;</code>ã€‚æ¯ä¸€ä¸ª <code>&lt;bean&gt;</code> å…ƒç´ éƒ½å®šä¹‰äº†ä¸€ä¸ª Beanï¼Œå¹¶æè¿°äº†è¯¥ Bean å¦‚ä½•è¢«è£…é…åˆ° Spring å®¹å™¨ä¸­ã€‚</p>
<p>åœ¨ä¸Šä¸€èŠ‚ä¸­çš„ Beans.xml é…ç½®æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;helloWorld&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.springlearn.HelloWorld&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;message&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Hello World!&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è§£é‡Š</p>
<ul>
<li><p>xmlns&#x3D;â€<a target="_blank" rel="noopener" href="http://www.springframework.org/schema/beans&quot;">http://www.springframework.org/schema/beans&quot;</a></p>
<p>å£°æ˜xmlæ–‡ä»¶é»˜è®¤çš„å‘½åç©ºé—´ï¼Œè¡¨ç¤ºæœªä½¿ç”¨å…¶ä»–å‘½åç©ºé—´çš„æ‰€æœ‰æ ‡ç­¾çš„é»˜è®¤å‘½åç©ºé—´ã€‚</p>
</li>
<li><p>xmlns:xsi&#x3D;â€<a target="_blank" rel="noopener" href="http://www.w3.org/2001/XMLSchema-instance&quot;">http://www.w3.org/2001/XMLSchema-instance&quot;</a></p>
<p>å£°æ˜XML Schemaå®ä¾‹ï¼Œå£°æ˜åå°±å¯ä»¥ä½¿ç”¨schemaLocationå±æ€§ã€‚</p>
</li>
<li><p>xsi:schemaLocation&#x3D;â€<a target="_blank" rel="noopener" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a><br><a target="_blank" rel="noopener" href="http://www.springframework.org/schema/beans/spring-beans-3.0.xsd%E2%80%9C">http://www.springframework.org/schema/beans/spring-beans-3.0.xsdâ€œ</a></p>
<p>æŒ‡å®šSchemaçš„ä½ç½®è¿™ä¸ªå±æ€§å¿…é¡»ç»“åˆå‘½åç©ºé—´ä½¿ç”¨ã€‚è¿™ä¸ªå±æ€§æœ‰ä¸¤ä¸ªå€¼ï¼Œç¬¬ä¸€ä¸ªå€¼è¡¨ç¤ºéœ€è¦ä½¿ç”¨çš„å‘½åç©ºé—´ã€‚ç¬¬äºŒä¸ªå€¼è¡¨ç¤ºä¾›å‘½åç©ºé—´ä½¿ç”¨çš„XML schemaçš„ä½ç½®ã€‚</p>
<p>ä¸Šé¢é…ç½®çš„å‘½åç©ºé—´æŒ‡å®šxsdè§„èŒƒæ–‡ä»¶ï¼Œè¿™æ ·ä½ åœ¨è¿›è¡Œä¸‹é¢å…·ä½“é…ç½®çš„æ—¶å€™å°±ä¼šæ ¹æ®è¿™äº›xsdè§„èŒƒæ–‡ä»¶ç»™å‡ºç›¸åº”çš„æç¤ºï¼Œæ¯”å¦‚è¯´æ¯ä¸ªæ ‡ç­¾æ˜¯æ€ä¹ˆå†™çš„ï¼Œéƒ½æœ‰äº›ä»€ä¹ˆå±æ€§æ˜¯éƒ½å¯ä»¥æ™ºèƒ½æç¤ºçš„ï¼Œåœ¨å¯åŠ¨æœåŠ¡çš„æ—¶å€™ä¹Ÿä¼šæ ¹æ®xsdè§„èŒƒå¯¹é…ç½®è¿›è¡Œæ ¡éªŒã€‚</p>
<p>é…ç½®æŠ€å·§ï¼šå¯¹äºå±æ€§å€¼çš„å†™æ³•æ˜¯æœ‰è§„å¾‹çš„ï¼Œä¸­é—´ä½¿ç”¨ç©ºæ ¼éš”å¼€ï¼Œåé¢çš„å€¼æ˜¯å‰é¢çš„è¡¥å……ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå‰é¢çš„å€¼æ˜¯å»é™¤äº†xsdæ–‡ä»¶åå¾—æ¥çš„ã€‚</p>
</li>
</ul>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œä½¿ç”¨ id å±æ€§å®šä¹‰äº† Beanï¼Œå¹¶ä½¿ç”¨ class å±æ€§æŒ‡å®šäº† Bean å¯¹åº”çš„ç±»ã€‚</p>
<p><code>&lt;bean&gt;</code> å…ƒç´ ä¸­å¯ä»¥åŒ…å«å¾ˆå¤šå±æ€§ï¼Œå…¶å¸¸ç”¨å±æ€§å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚</p>
<table>
<thead>
<tr>
<th>å±æ€§åç§°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>Bean çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ŒSpring å®¹å™¨å¯¹ Bean çš„é…ç½®å’Œç®¡ç†éƒ½é€šè¿‡è¯¥å±æ€§å®Œæˆã€‚id çš„å€¼å¿…é¡»ä»¥å­—æ¯å¼€å§‹ï¼Œå¯ä»¥ä½¿ç”¨å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ç­‰ç¬¦å·ã€‚</td>
</tr>
<tr>
<td>name</td>
<td>name å±æ€§ä¸­å¯ä»¥ä¸º Bean æŒ‡å®šå¤šä¸ªåç§°ï¼Œæ¯ä¸ªåç§°ä¹‹é—´ç”¨é€—å·æˆ–åˆ†å·éš”å¼€ã€‚Spring å®¹å™¨å¯ä»¥é€šè¿‡ name å±æ€§é…ç½®å’Œç®¡ç†å®¹å™¨ä¸­çš„ Beanã€‚</td>
</tr>
<tr>
<td>class</td>
<td>è¯¥å±æ€§æŒ‡å®šäº† Bean çš„å…·ä½“å®ç°ç±»ï¼Œå®ƒå¿…é¡»æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç±»åï¼Œå³ç±»çš„å…¨é™å®šåã€‚</td>
</tr>
<tr>
<td>scope</td>
<td>ç”¨äºè®¾å®š Bean å®ä¾‹çš„ä½œç”¨åŸŸï¼Œå±æ€§å€¼å¯ä»¥ä¸º singletonï¼ˆå•ä¾‹ï¼‰ã€prototypeï¼ˆåŸå‹ï¼‰ã€requestã€session å’Œ global Sessionã€‚å…¶é»˜è®¤å€¼æ˜¯ singleton</td>
</tr>
<tr>
<td>constructor-arg</td>
<td><bean>å…ƒç´ çš„å­å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨æ­¤å…ƒç´ ä¼ å…¥æ„é€ å‚æ•°è¿›è¡Œå®ä¾‹åŒ–ã€‚è¯¥å…ƒç´ çš„ index å±æ€§æŒ‡å®šæ„é€ å‚æ•°çš„åºå·ï¼ˆä» 0 å¼€å§‹ï¼‰ï¼Œtype å±æ€§æŒ‡å®šæ„é€ å‚æ•°çš„ç±»å‹</td>
</tr>
<tr>
<td>property</td>
<td><bean>å…ƒç´ çš„å­å…ƒç´ ï¼Œç”¨äºè°ƒç”¨ Bean å®ä¾‹ä¸­çš„ setter æ–¹æ³•æ¥å±æ€§èµ‹å€¼ï¼Œä»è€Œå®Œæˆä¾èµ–æ³¨å…¥ã€‚è¯¥å…ƒç´ çš„ name å±æ€§ç”¨äºæŒ‡å®š Bean å®ä¾‹ä¸­ç›¸åº”çš„å±æ€§å</td>
</tr>
<tr>
<td>ref</td>
<td><property> å’Œ <constructor-arg> ç­‰å…ƒç´ çš„å­å…ƒç´¢ï¼Œè¯¥å…ƒç´ ä¸­çš„ bean å±æ€§ç”¨äºæŒ‡å®šå¯¹æŸä¸ª Bean å®ä¾‹çš„å¼•ç”¨</td>
</tr>
<tr>
<td>value</td>
<td><property> å’Œ <constractor-arg> ç­‰å…ƒç´ çš„å­å…ƒç´ ï¼Œç”¨äºç›´æ¥æŒ‡å®šä¸€ä¸ªå¸¸é‡å€¼</td>
</tr>
<tr>
<td>list</td>
<td>ç”¨äºå°è£… List æˆ–æ•°ç»„ç±»å‹çš„ä¾èµ–æ³¨å…¥</td>
</tr>
<tr>
<td>set</td>
<td>ç”¨äºå°è£… Set ç±»å‹çš„ä¾èµ–æ³¨å…¥</td>
</tr>
<tr>
<td>map</td>
<td>ç”¨äºå°è£… Map ç±»å‹çš„ä¾èµ–æ³¨å…¥</td>
</tr>
<tr>
<td>entry</td>
<td><map> å…ƒç´ çš„å­å…ƒç´ ï¼Œç”¨äºè®¾ç½®ä¸€ä¸ªé”®å€¼å¯¹ã€‚å…¶ key å±æ€§æŒ‡å®šå­—ç¬¦ä¸²ç±»å‹çš„é”®å€¼ï¼Œref æˆ– value å­å…ƒç´ æŒ‡å®šå…¶å€¼</td>
</tr>
<tr>
<td>init-method</td>
<td>å®¹å™¨åŠ è½½ Bean æ—¶è°ƒç”¨è¯¥æ–¹æ³•ï¼Œç±»ä¼¼äº Servlet ä¸­çš„ init() æ–¹æ³•</td>
</tr>
<tr>
<td>destroy-method</td>
<td>å®¹å™¨åˆ é™¤ Bean æ—¶è°ƒç”¨è¯¥æ–¹æ³•ï¼Œç±»ä¼¼äº Servlet ä¸­çš„ destroy() æ–¹æ³•ã€‚è¯¥æ–¹æ³•åªåœ¨ scope&#x3D;singleton æ—¶æœ‰æ•ˆ</td>
</tr>
<tr>
<td>lazy-init</td>
<td>æ‡’åŠ è½½ï¼Œå€¼ä¸º trueï¼Œå®¹å™¨åœ¨é¦–æ¬¡è¯·æ±‚æ—¶æ‰ä¼šåˆ›å»º Bean å®ä¾‹ï¼›å€¼ä¸º falseï¼Œå®¹å™¨åœ¨å¯åŠ¨æ—¶åˆ›å»º Bean å®ä¾‹ã€‚è¯¥æ–¹æ³•åªåœ¨ scope&#x3D;singleton æ—¶æœ‰æ•ˆ</td>
</tr>
</tbody></table>
<h1 id="Spring-Beanä½œç”¨åŸŸ"><a href="#Spring-Beanä½œç”¨åŸŸ" class="headerlink" title="Spring Beanä½œç”¨åŸŸ"></a>Spring Beanä½œç”¨åŸŸ</h1><blockquote>
<p>Beançš„ç”Ÿå‘½å‘¨æœŸï¼Œä»åˆ›å»ºåˆ°é”€æ¯ã€‚</p>
</blockquote>
<p>åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé™¤äº†å¯ä»¥å®šä¹‰ Bean çš„å±æ€§å€¼å’Œç›¸äº’ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œè¿˜å¯ä»¥å£°æ˜ Bean çš„ä½œç”¨åŸŸã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ¯æ¬¡è·å– Bean æ—¶ï¼Œéƒ½éœ€è¦ä¸€ä¸ª Bean å®ä¾‹ï¼Œé‚£ä¹ˆåº”è¯¥å°† Bean çš„ scope å±æ€§å®šä¹‰ä¸º prototypeï¼Œå¦‚æœ Spring éœ€è¦æ¯æ¬¡éƒ½è¿”å›ä¸€ä¸ªç›¸åŒçš„ Bean å®ä¾‹ï¼Œåˆ™åº”å°† Bean çš„ scope å±æ€§å®šä¹‰ä¸º singletonã€‚</p>
<h2 id="ä½œç”¨åŸŸçš„ç§ç±»"><a href="#ä½œç”¨åŸŸçš„ç§ç±»" class="headerlink" title="ä½œç”¨åŸŸçš„ç§ç±»"></a>ä½œç”¨åŸŸçš„ç§ç±»</h2><p>Spring å®¹å™¨åœ¨åˆå§‹åŒ–ä¸€ä¸ª Bean å®ä¾‹æ—¶ï¼ŒåŒæ—¶ä¼šæŒ‡å®šè¯¥å®ä¾‹çš„ä½œç”¨åŸŸã€‚Spring 5 æ”¯æŒä»¥ä¸‹ 6 ç§ä½œç”¨åŸŸã€‚</p>
<ul>
<li><p>singleton</p>
<p>é»˜è®¤å€¼ï¼Œå•ä¾‹æ¨¡å¼ï¼Œè¡¨ç¤ºåœ¨ Spring å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ª Bean å®ä¾‹ï¼ŒBean ä»¥å•ä¾‹çš„æ–¹å¼å­˜åœ¨ã€‚</p>
</li>
<li><p>prototype</p>
<p>åŸå‹æ¨¡å¼ï¼Œè¡¨ç¤ºæ¯æ¬¡é€šè¿‡ Spring å®¹å™¨è·å– Bean æ—¶ï¼Œå®¹å™¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ª Bean å®ä¾‹ã€‚</p>
</li>
<li><p>request</p>
<p>æ¯æ¬¡ HTTP è¯·æ±‚ï¼Œå®¹å™¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ª Bean å®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸåªåœ¨å½“å‰ HTTP Request å†…æœ‰æ•ˆã€‚</p>
</li>
<li><p>session</p>
<p>åŒä¸€ä¸ª HTTP Session å…±äº«ä¸€ä¸ª Bean å®ä¾‹ï¼Œä¸åŒçš„ Session ä½¿ç”¨ä¸åŒçš„ Bean å®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨å½“å‰ HTTP Session å†…æœ‰æ•ˆã€‚</p>
</li>
<li><p>application</p>
<p>åŒä¸€ä¸ª Web åº”ç”¨å…±äº«ä¸€ä¸ª Bean å®ä¾‹ï¼Œè¯¥ä½œç”¨åŸŸåœ¨å½“å‰ ServletContext å†…æœ‰æ•ˆã€‚</p>
<p>ç±»ä¼¼äº singletonï¼Œä¸åŒçš„æ˜¯ï¼Œsingleton è¡¨ç¤ºæ¯ä¸ª IoC å®¹å™¨ä¸­ä»…æœ‰ä¸€ä¸ª Bean å®ä¾‹ï¼Œè€ŒåŒä¸€ä¸ª Web åº”ç”¨ä¸­å¯èƒ½ä¼šæœ‰å¤šä¸ª IoC å®¹å™¨ï¼Œä½†ä¸€ä¸ª Web åº”ç”¨åªä¼šæœ‰ä¸€ä¸ª ServletContextï¼Œä¹Ÿå¯ä»¥è¯´ application æ‰æ˜¯ Web åº”ç”¨ä¸­è´§çœŸä»·å®çš„å•ä¾‹æ¨¡å¼ã€‚</p>
</li>
<li><p>websocket</p>
<p>websocket çš„ä½œç”¨åŸŸæ˜¯ WebSocket ï¼Œå³åœ¨æ•´ä¸ª WebSocket ä¸­æœ‰æ•ˆã€‚</p>
</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šSpring 5 ç‰ˆæœ¬ä¹‹å‰è¿˜æ”¯æŒ global Sessionï¼Œè¯¥å€¼è¡¨ç¤ºåœ¨ä¸€ä¸ªå…¨å±€çš„ HTTP Session ä¸­ï¼Œå®¹å™¨ä¼šè¿”å›è¯¥ Bean çš„åŒä¸€ä¸ªå®ä¾‹ã€‚ä¸€èˆ¬ç”¨äº Portlet åº”ç”¨ç¯å¢ƒã€‚Spring 5.2.0 ç‰ˆæœ¬ä¸­å·²ç»å°†è¯¥å€¼ç§»é™¤äº†ã€‚</p>
</blockquote>
<p>requestã€sessionã€applicationã€websocket å’Œ global Session ä½œç”¨åŸŸåªèƒ½åœ¨ Web ç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œå¦‚æœä½¿ç”¨ ClassPathXmlApplicationContext åŠ è½½è¿™äº›ä½œç”¨åŸŸä¸­çš„ä»»æ„ä¸€ä¸ªçš„ Beanï¼Œå°±ä¼šæŠ›å‡ºä»¥ä¸‹å¼‚å¸¸ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.IllegalStateException: No Scope registered for scope name &#x27;xxx&#x27;</span><br></pre></td></tr></table></figure>


<p>ä¸‹é¢æˆ‘ä»¬è¯¦ç»†è®²è§£å¸¸ç”¨çš„ä¸¤ä¸ªä½œç”¨åŸŸï¼šsingleton å’Œ prototypeã€‚</p>
<h4 id="singleton"><a href="#singleton" class="headerlink" title="singleton"></a>singleton</h4><p><strong>singleton æ˜¯ Spring å®¹å™¨é»˜è®¤çš„ä½œç”¨åŸŸã€‚</strong></p>
<p>å½“ Bean çš„ä½œç”¨åŸŸä¸º singleton æ—¶ï¼ŒSpring å®¹å™¨ä¸­åªä¼šå­˜åœ¨ä¸€ä¸ªå…±äº«çš„ Bean å®ä¾‹ã€‚è¯¥ Bean å®ä¾‹å°†å­˜å‚¨åœ¨é«˜é€Ÿç¼“å­˜ä¸­ï¼Œå¹¶ä¸”æ‰€æœ‰å¯¹ Bean çš„è¯·æ±‚ï¼Œåªè¦ id ä¸è¯¥ Bean å®šä¹‰ç›¸åŒ¹é…ï¼Œéƒ½ä¼šè¿”å›è¯¥ç¼“å­˜å¯¹è±¡ã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™ç§å•ä¾‹æ¨¡å¼å¯¹äºæ— ä¼šè¯çŠ¶æ€çš„ Beanï¼ˆå¦‚ DAO å±‚ã€Service å±‚ï¼‰æ¥è¯´ï¼Œæ˜¯æœ€ç†æƒ³çš„é€‰æ‹©ã€‚</p>
<p>åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>&lt;bean&gt;</code> å…ƒç´ çš„ scope å±æ€§ï¼Œå°† Bean çš„ä½œç”¨åŸŸå®šä¹‰æˆ singletonï¼Œå…¶é…ç½®æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;...&quot; class=&quot;...&quot; scope=&quot;singleton&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h5 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h5><p>æˆ‘ä»¬é‡æ–°æ”¹è£…MainAppç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package com.springlearn;</span><br><span class="line"></span><br><span class="line">import org.springframework.context.ApplicationContext;</span><br><span class="line">import org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line">public class MainApp &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ApplicationContext context = new ClassPathXmlApplicationContext(&quot;Beans.xml&quot;);</span><br><span class="line">        HelloWorld objA = (HelloWorld) context.getBean(&quot;helloWorld&quot;);</span><br><span class="line">        objA.setMessage(&quot;å¯¹è±¡A&quot;);</span><br><span class="line">        objA.getMessage();</span><br><span class="line">        HelloWorld objB = (HelloWorld) context.getBean(&quot;helloWorld&quot;);</span><br><span class="line">        objB.getMessage();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”±äºSpring å®¹å™¨é»˜è®¤çš„ä½œç”¨åŸŸæ˜¯singletonã€‚</p>
<p>æ‰€ä»¥Bean.xmlå¯ä»¥ä¸ç”¨ä¿®æ”¹ï¼Œå½“å‰ä½ ä¹Ÿå¯ä»¥åŠ ä¸Š<code>scope</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;helloWorld&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.springlearn.HelloWorld&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;singleton&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœå¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">message : å¯¹è±¡A</span><br><span class="line">message : å¯¹è±¡A</span><br></pre></td></tr></table></figure>

<p>ä»è¿è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼Œä¸¤æ¬¡è¾“å‡ºå†…å®¹ç›¸åŒï¼Œè¿™è¯´æ˜ Spring å®¹å™¨åªåˆ›å»ºäº†ä¸€ä¸ª HelloWorld ç±»çš„å®ä¾‹ã€‚ç”±äº Spring å®¹å™¨é»˜è®¤ä½œç”¨åŸŸæ˜¯ singletonï¼Œæ‰€ä»¥å¦‚æœçœç•¥ scope å±æ€§ï¼Œå…¶è¾“å‡ºç»“æœä¹Ÿä¼šæ˜¯ä¸€ä¸ªå®ä¾‹ã€‚</p>
<h4 id="prototype"><a href="#prototype" class="headerlink" title="prototype"></a>prototype</h4><p>ç¬æ—¶</p>
<p>å¯¹äº prototype ä½œç”¨åŸŸçš„ Beanï¼ŒSpring å®¹å™¨ä¼šåœ¨æ¯æ¬¡è¯·æ±‚è¯¥ Bean æ—¶éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„ Bean å®ä¾‹ã€‚prototype ä½œç”¨åŸŸé€‚ç”¨äºéœ€è¦ä¿æŒä¼šè¯çŠ¶æ€çš„ Beanï¼ˆå¦‚ Struts2 çš„ Action ç±»ï¼‰ã€‚</p>
<p>åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <bean> å…ƒç´ çš„ scope å±æ€§ï¼Œå°† Bean çš„ä½œç”¨åŸŸå®šä¹‰æˆ prototypeï¼Œå…¶é…ç½®æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;...&quot; class=&quot;...&quot; scope=&quot;prototype&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h5 id="ä¾‹å­-1"><a href="#ä¾‹å­-1" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h5><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ Beans.xmlï¼Œå†…å®¹å¦‚ä¸‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;helloWorld&quot; class=&quot;com.springlearn.HelloWorld&quot;  scope=&quot;prototype&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœå¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">message : å¯¹è±¡A</span><br><span class="line">message : null</span><br></pre></td></tr></table></figure>

<p>ä»è¿è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼Œä¸¤æ¬¡è¾“å‡ºçš„å†…å®¹å¹¶ä¸ç›¸åŒï¼Œè¿™è¯´æ˜åœ¨ prototype ä½œç”¨åŸŸä¸‹ï¼ŒSpring å®¹å™¨åˆ›å»ºäº†ä¸¤ä¸ªä¸åŒçš„ HelloWorld å®ä¾‹ã€‚</p>
<h1 id="Spring-Beanç”Ÿå‘½å‘¨æœŸ"><a href="#Spring-Beanç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Spring Beanç”Ÿå‘½å‘¨æœŸ"></a>Spring Beanç”Ÿå‘½å‘¨æœŸ</h1><p>åœ¨ä¼ ç»Ÿçš„ Java åº”ç”¨ä¸­ï¼ŒBean çš„ç”Ÿå‘½å‘¨æœŸå¾ˆç®€å•ï¼Œä½¿ç”¨å…³é”®å­— new å®ä¾‹åŒ– Beanï¼Œå½“ä¸éœ€è¦è¯¥ Bean æ—¶ï¼Œç”± Java è‡ªåŠ¨è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</p>
<p>Spring ä¸­ Bean çš„ç”Ÿå‘½å‘¨æœŸä¸ºï¼šBean çš„å®šä¹‰ -&gt; Bean çš„åˆå§‹åŒ– -&gt; Bean çš„ä½¿ç”¨ -&gt; Bean çš„é”€æ¯ã€‚</p>
<p>Spring æ ¹æ® Bean çš„ä½œç”¨åŸŸæ¥é€‰æ‹©ç®¡ç†æ–¹å¼ã€‚å¯¹äº singleton ä½œç”¨åŸŸçš„ Beanï¼ŒSpring èƒ½å¤Ÿç²¾ç¡®åœ°çŸ¥é“è¯¥ Bean ä½•æ—¶è¢«åˆ›å»ºï¼Œä½•æ—¶åˆå§‹åŒ–å®Œæˆï¼Œä»¥åŠä½•æ—¶è¢«é”€æ¯ï¼›è€Œå¯¹äº prototype ä½œç”¨åŸŸçš„ Beanï¼ŒSpring åªè´Ÿè´£åˆ›å»ºï¼Œå½“å®¹å™¨åˆ›å»ºäº† Bean çš„å®ä¾‹åï¼ŒBean çš„å®ä¾‹å°±äº¤ç»™å®¢æˆ·ç«¯ä»£ç ç®¡ç†ï¼ŒSpring å®¹å™¨å°†ä¸å†è·Ÿè¸ªå…¶ç”Ÿå‘½å‘¨æœŸã€‚</p>
<h2 id="Spring-Beanç”Ÿå‘½å‘¨æœŸæ‰§è¡Œæµç¨‹"><a href="#Spring-Beanç”Ÿå‘½å‘¨æœŸæ‰§è¡Œæµç¨‹" class="headerlink" title="Spring Beanç”Ÿå‘½å‘¨æœŸæ‰§è¡Œæµç¨‹"></a>Spring Beanç”Ÿå‘½å‘¨æœŸæ‰§è¡Œæµç¨‹</h2><p>Spring å®¹å™¨åœ¨ç¡®ä¿ä¸€ä¸ª Bean èƒ½å¤Ÿä½¿ç”¨ä¹‹å‰ï¼Œä¼šè¿›è¡Œå¾ˆå¤šå·¥ä½œã€‚Spring å®¹å™¨ä¸­ Bean çš„ç”Ÿå‘½å‘¨æœŸæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="https://images.cnblogs.com/cnblogs_com/qs315/2071952/o_211215060522_111.jpg" alt="o_211215060522_111.jpg (1154Ã—959) (cnblogs.com)" loading="lazy"></p>
<p>Bean ç”Ÿå‘½å‘¨æœŸçš„æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹æè¿°å¦‚ä¸‹ã€‚</p>
<ol>
<li>Spring å¯åŠ¨ï¼ŒæŸ¥æ‰¾å¹¶åŠ è½½éœ€è¦è¢« Spring ç®¡ç†çš„ Beanï¼Œå¹¶å®ä¾‹åŒ– Beanã€‚</li>
<li>åˆ©ç”¨ä¾èµ–æ³¨å…¥å®Œæˆ Bean ä¸­æ‰€æœ‰å±æ€§å€¼çš„é…ç½®æ³¨å…¥ã€‚</li>
<li>å¦‚æœ Bean å®ç°äº† BeanNameAware æ¥å£ï¼Œåˆ™ Spring è°ƒç”¨ Bean çš„ setBeanName() æ–¹æ³•ä¼ å…¥å½“å‰ Bean çš„ id å€¼ã€‚</li>
<li>å¦‚æœ Bean å®ç°äº† BeanFactoryAware æ¥å£ï¼Œåˆ™ Spring è°ƒç”¨ setBeanFactory() æ–¹æ³•ä¼ å…¥å½“å‰å·¥å‚å®ä¾‹çš„å¼•ç”¨ã€‚</li>
<li>å¦‚æœ Bean å®ç°äº† ApplicationContextAware æ¥å£ï¼Œåˆ™ Spring è°ƒç”¨ setApplicationContext() æ–¹æ³•ä¼ å…¥å½“å‰ ApplicationContext å®ä¾‹çš„å¼•ç”¨ã€‚</li>
<li>å¦‚æœ Bean å®ç°äº† <a target="_blank" rel="noopener" href="http://c.biancheng.net/spring/bean-post-processor.html">BeanPostProcessor</a> æ¥å£ï¼Œåˆ™ Spring è°ƒç”¨è¯¥æ¥å£çš„é¢„åˆå§‹åŒ–æ–¹æ³• postProcessBeforeInitialzation() å¯¹ Bean è¿›è¡ŒåŠ å·¥æ“ä½œï¼Œæ­¤å¤„éå¸¸é‡è¦ï¼ŒSpring çš„ AOP å°±æ˜¯åˆ©ç”¨å®ƒå®ç°çš„ã€‚</li>
<li>å¦‚æœ Bean å®ç°äº† InitializingBean æ¥å£ï¼Œåˆ™ Spring å°†è°ƒç”¨ afterPropertiesSet() æ–¹æ³•ã€‚</li>
<li>å¦‚æœåœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡ init-method å±æ€§æŒ‡å®šäº†åˆå§‹åŒ–æ–¹æ³•ï¼Œåˆ™è°ƒç”¨è¯¥åˆå§‹åŒ–æ–¹æ³•ã€‚</li>
<li>å¦‚æœ <a target="_blank" rel="noopener" href="http://c.biancheng.net/spring/bean-post-processor.html">BeanPostProcessor </a>å’Œ Bean å…³è”ï¼Œåˆ™ Spring å°†è°ƒç”¨è¯¥æ¥å£çš„åˆå§‹åŒ–æ–¹æ³• postProcessAfterInitialization()ã€‚æ­¤æ—¶ï¼ŒBean å·²ç»å¯ä»¥è¢«åº”ç”¨ç³»ç»Ÿä½¿ç”¨äº†ã€‚</li>
<li>å¦‚æœåœ¨ <bean> ä¸­æŒ‡å®šäº†è¯¥ Bean çš„ä½œç”¨åŸŸä¸º singletonï¼Œåˆ™å°†è¯¥ Bean æ”¾å…¥ Spring IoC çš„ç¼“å­˜æ± ä¸­ï¼Œè§¦å‘ Spring å¯¹è¯¥ Bean çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼›å¦‚æœåœ¨ <bean> ä¸­æŒ‡å®šäº†è¯¥ Bean çš„ä½œç”¨åŸŸä¸º prototypeï¼Œåˆ™å°†è¯¥ Bean äº¤ç»™è°ƒç”¨è€…ï¼Œè°ƒç”¨è€…ç®¡ç†è¯¥ Bean çš„ç”Ÿå‘½å‘¨æœŸï¼ŒSpring ä¸å†ç®¡ç†è¯¥ Beanã€‚</li>
<li>å¦‚æœ Bean å®ç°äº† DisposableBean æ¥å£ï¼Œåˆ™ Spring ä¼šè°ƒç”¨ destory() æ–¹æ³•é”€æ¯ Beanï¼›å¦‚æœåœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡ destory-method å±æ€§æŒ‡å®šäº† Bean çš„é”€æ¯æ–¹æ³•ï¼Œåˆ™ Spring å°†è°ƒç”¨è¯¥æ–¹æ³•å¯¹ Bean è¿›è¡Œé”€æ¯ã€‚</li>
</ol>
<p>Spring ä¸º Bean æä¾›äº†ç»†è‡´å…¨é¢çš„ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹ï¼Œå®ç°ç‰¹å®šçš„æ¥å£æˆ–è®¾ç½® <bean> çš„å±æ€§éƒ½å¯ä»¥å¯¹ Bean çš„ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹äº§ç”Ÿå½±å“ã€‚å»ºè®®ä¸è¦è¿‡å¤šçš„ä½¿ç”¨ Bean å®ç°æ¥å£ï¼Œå› ä¸ºè¿™æ ·ä¼šå¯¼è‡´ä»£ç çš„è€¦åˆæ€§è¿‡é«˜ã€‚</p>
<p>äº†è§£ Spring ç”Ÿå‘½å‘¨æœŸçš„æ„ä¹‰å°±åœ¨äºï¼Œå¯ä»¥åˆ©ç”¨ Bean åœ¨å…¶å­˜æ´»æœŸé—´çš„æŒ‡å®šæ—¶åˆ»å®Œæˆä¸€äº›ç›¸å…³æ“ä½œã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¼šåœ¨ Bean è¢«åˆå§‹åŒ–åå’Œè¢«é”€æ¯å‰æ‰§è¡Œä¸€äº›ç›¸å…³æ“ä½œã€‚</p>
<p>Spring å®˜æ–¹æä¾›äº† 3 ç§æ–¹æ³•å®ç°åˆå§‹åŒ–å›è°ƒå’Œé”€æ¯å›è°ƒï¼š</p>
<ol>
<li>å®ç° InitializingBean å’Œ DisposableBean æ¥å£ï¼›</li>
<li>åœ¨ XML ä¸­é…ç½® init-method å’Œ destory-methodï¼›</li>
<li>ä½¿ç”¨ @PostConstruct å’Œ @PreDestory æ³¨è§£ã€‚</li>
</ol>
<p>åœ¨ä¸€ä¸ª Bean ä¸­æœ‰å¤šç§ç”Ÿå‘½å‘¨æœŸå›è°ƒæ–¹æ³•æ—¶ï¼Œä¼˜å…ˆçº§ä¸ºï¼šæ³¨è§£ &gt; æ¥å£ &gt; XMLã€‚</p>
<blockquote>
<p>ä¸å»ºè®®ä½¿ç”¨æ¥å£å’Œæ³¨è§£ï¼Œè¿™ä¼šè®© pojo ç±»å’Œ Spring æ¡†æ¶ç´§è€¦åˆã€‚</p>
</blockquote>
<h4 id="åˆå§‹åŒ–å›è°ƒ"><a href="#åˆå§‹åŒ–å›è°ƒ" class="headerlink" title="åˆå§‹åŒ–å›è°ƒ"></a>åˆå§‹åŒ–å›è°ƒ</h4><ol>
<li><h4 id="ä½¿ç”¨æ¥å£"><a href="#ä½¿ç”¨æ¥å£" class="headerlink" title="ä½¿ç”¨æ¥å£"></a>ä½¿ç”¨æ¥å£</h4><p>ä¿®æ”¹<code>HelloWorld</code>ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springlearn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.InitializingBean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> <span class="keyword">implements</span> <span class="title class_">InitializingBean</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;message : &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.printf(<span class="string">&quot;è°ƒç”¨æ¥å£ï¼šInitializingBeanï¼Œæ–¹æ³•ï¼šafterPropertiesSetï¼Œæ— å‚æ•°&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è°ƒç”¨æ¥å£ï¼šInitializingBeanï¼Œæ–¹æ³•ï¼šafterPropertiesSetï¼Œæ— å‚æ•°message : å¯¹è±¡A</span><br><span class="line">è°ƒç”¨æ¥å£ï¼šInitializingBeanï¼Œæ–¹æ³•ï¼šafterPropertiesSetï¼Œæ— å‚æ•°message : null</span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="é…ç½®XML"><a href="#é…ç½®XML" class="headerlink" title="é…ç½®XML"></a>é…ç½®XML</h4><p>bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;helloWorld&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.springlearn.HelloWorld&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;init&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ·»åŠ <code>init()</code>æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springlearn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.InitializingBean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;message : &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è°ƒç”¨init-methodæŒ‡å®šçš„åˆå§‹åŒ–æ–¹æ³•:init&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
<li><h4 id="ä½¿ç”¨æ³¨è§£"><a href="#ä½¿ç”¨æ³¨è§£" class="headerlink" title="ä½¿ç”¨æ³¨è§£"></a>ä½¿ç”¨æ³¨è§£</h4><p>ä½¿ç”¨ @PostConstruct æ³¨è§£æ ‡æ˜è¯¥æ–¹æ³•ä¸º Bean åˆå§‹åŒ–åçš„æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWrold</span> &#123;</span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;@PostConstructæ³¨è§£æŒ‡å®šçš„åˆå§‹åŒ–æ–¹æ³•:init&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>@PostConstruct</code>æ³¨è§£éœ€è¦å¼•å…¥<code>javax.annotation</code></p>
<p>åœ¨<code>pom.xml</code>ä¸­æ·»åŠ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;javax.annotation&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jsr250-api&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">1.0</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="é”€æ¯å›è°ƒ"><a href="#é”€æ¯å›è°ƒ" class="headerlink" title="é”€æ¯å›è°ƒ"></a>é”€æ¯å›è°ƒ</h3><ol>
<li><h4 id="ä½¿ç”¨æ¥å£-1"><a href="#ä½¿ç”¨æ¥å£-1" class="headerlink" title="ä½¿ç”¨æ¥å£"></a>ä½¿ç”¨æ¥å£</h4><p>org.springframework.beans.factory.DisposableBean æ¥å£æä¾›äº†ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> <span class="keyword">throws</span> Exception;</span><br></pre></td></tr></table></figure>

<p>æ‚¨å¯ä»¥å®ç°ä»¥ä¸Šæ¥å£ï¼Œåœ¨ destroy æ–¹æ³•å†…æŒ‡å®š Bean åˆå§‹åŒ–åéœ€è¦æ‰§è¡Œçš„æ“ä½œã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=<span class="string">&quot;...&quot;</span> class=<span class="string">&quot;...&quot;</span> /&gt;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWrold</span> <span class="keyword">implements</span> <span class="title class_">InitializingBean</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è°ƒç”¨æ¥å£ï¼šInitializingBeanï¼Œæ–¹æ³•ï¼šafterPropertiesSetï¼Œæ— å‚æ•°&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><h4 id="é…ç½®XML-1"><a href="#é…ç½®XML-1" class="headerlink" title="é…ç½®XML"></a>é…ç½®XML</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=<span class="string">&quot;...&quot;</span> class=<span class="string">&quot;...&quot;</span> destroy-method=<span class="string">&quot;destroy&quot;</span>/&gt;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWrold</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è°ƒç”¨destroy-methodæŒ‡å®šçš„é”€æ¯æ–¹æ³•:destroy&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><h4 id="ä½¿ç”¨æ³¨è§£-1"><a href="#ä½¿ç”¨æ³¨è§£-1" class="headerlink" title="ä½¿ç”¨æ³¨è§£"></a>ä½¿ç”¨æ³¨è§£</h4><p>ä½¿ç”¨ @PreDestory æ³¨è§£æ ‡æ˜è¯¥æ–¹æ³•ä¸º Bean é”€æ¯å‰æ‰§è¡Œçš„æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWrold</span> &#123;</span><br><span class="line">    <span class="meta">@PreDestory</span> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;@PreDestoryæ³¨è§£æŒ‡å®šçš„åˆå§‹åŒ–æ–¹æ³•:destroy&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><p><code>HelloWorld</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springlearn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;message : &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Beanæ­£åœ¨è¿›è¡Œåˆå§‹åŒ–&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Beanå°†è¦è¢«é”€æ¯&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;helloWorld&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.springlearn.HelloWorld&quot;</span>  <span class="attr">init-method</span>=<span class="string">&quot;init&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;destroy&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;message&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Hello Worldï¼&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>MainApp</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springlearn;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.AbstractApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApp</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">AbstractApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;Beans.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Thread.currentThread();</span><br><span class="line"></span><br><span class="line">        <span class="type">HelloWorld</span> <span class="variable">objA</span> <span class="operator">=</span> (HelloWorld) context.getBean(<span class="string">&quot;helloWorld&quot;</span>);</span><br><span class="line">        objA.getMessage();</span><br><span class="line">        <span class="comment">//é”€æ¯å®¹å™¨</span></span><br><span class="line">        context.registerShutdownHook();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Beanæ­£åœ¨è¿›è¡Œåˆå§‹åŒ–</span><br><span class="line">message : Hello Worldï¼</span><br><span class="line">Beanå°†è¦è¢«é”€æ¯</span><br></pre></td></tr></table></figure>

<h4 id="é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"><a href="#é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•" class="headerlink" title="é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"></a>é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</h4><p>å¦‚æœå¤šä¸ª Bean éœ€è¦ä½¿ç”¨ç›¸åŒçš„åˆå§‹åŒ–æˆ–è€…é”€æ¯æ–¹æ³•ï¼Œä¸ç”¨ä¸ºæ¯ä¸ª bean å£°æ˜åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ default-init-method å’Œ default-destroy-method å±æ€§ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span><br><span class="line">    default-init-method=&quot;init&quot;</span><br><span class="line">    default-destroy-method=&quot;destroy&quot;&gt;</span><br><span class="line">    &lt;bean id=&quot;...&quot; class=&quot;...&quot;&gt;</span><br><span class="line">        ...</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<h1 id="BeanPostProcessorï¼ˆSpringåç½®å¤„ç†å™¨ï¼‰"><a href="#BeanPostProcessorï¼ˆSpringåç½®å¤„ç†å™¨ï¼‰" class="headerlink" title="BeanPostProcessorï¼ˆSpringåç½®å¤„ç†å™¨ï¼‰"></a>BeanPostProcessorï¼ˆSpringåç½®å¤„ç†å™¨ï¼‰</h1><p>BeanPostProcessor æ¥å£ä¹Ÿè¢«ç§°ä¸ºåç½®å¤„ç†å™¨ï¼Œé€šè¿‡è¯¥æ¥å£å¯ä»¥è‡ªå®šä¹‰è°ƒç”¨åˆå§‹åŒ–å‰åæ‰§è¡Œçš„æ“ä½œæ–¹æ³•ã€‚</p>
<p>BeanPostProcessor æ¥å£æºç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface BeanPostProcessor &#123;</span><br><span class="line">    Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException;</span><br><span class="line">    Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>postProcessBeforeInitialization åœ¨ Bean å®ä¾‹åŒ–ã€ä¾èµ–æ³¨å…¥åï¼Œåˆå§‹åŒ–å‰è°ƒç”¨ã€‚postProcessAfterInitialization åœ¨ Bean å®ä¾‹åŒ–ã€ä¾èµ–æ³¨å…¥ã€åˆå§‹åŒ–éƒ½å®Œæˆåè°ƒç”¨ã€‚</p>
<p>å½“éœ€è¦æ·»åŠ å¤šä¸ªåç½®å¤„ç†å™¨å®ç°ç±»æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ Spring å®¹å™¨ä¼šæ ¹æ®åç½®å¤„ç†å™¨çš„å®šä¹‰é¡ºåºæ¥ä¾æ¬¡è°ƒç”¨ã€‚ä¹Ÿå¯ä»¥é€šè¿‡å®ç° Ordered æ¥å£çš„ getOrder æ–¹æ³•æŒ‡å®šåç½®å¤„ç†å™¨çš„æ‰§è¡Œé¡ºåºã€‚è¯¥æ–¹æ³•è¿”å›å€¼ä¸ºæ•´æ•°ï¼Œé»˜è®¤å€¼ä¸º 0ï¼Œå€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šä½ã€‚</p>
<p>æ–°å»ºInitHelloWorld ç±»ä»£ç å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import org.springframework.beans.BeansException;</span><br><span class="line">import org.springframework.beans.factory.config.BeanPostProcessor;</span><br><span class="line">import org.springframework.core.Ordered;</span><br><span class="line">public class InitHelloWorld implements BeanPostProcessor, Ordered &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException &#123;</span><br><span class="line">        System.out.println(&quot;A Before : &quot; + beanName);</span><br><span class="line">        return bean;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException &#123;</span><br><span class="line">        System.out.println(&quot;A After : &quot; + beanName);</span><br><span class="line">        return bean;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public int getOrder() &#123;</span><br><span class="line">        return 5;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒpostProcessBeforeInitialization å’Œ postProcessAfterInitialization æ–¹æ³•è¿”å›å€¼ä¸èƒ½ä¸º nullï¼Œå¦åˆ™ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸æˆ–è€…é€šè¿‡ getBean() æ–¹æ³•è·å–ä¸åˆ° Bean å®ä¾‹å¯¹è±¡ï¼Œå› ä¸ºåç½®å¤„ç†å™¨ä»Spring IoC å®¹å™¨ä¸­å–å‡º Bean å®ä¾‹å¯¹è±¡åæ²¡æœ‰å†æ¬¡æ”¾å›åˆ° IoC å®¹å™¨ä¸­ã€‚</p>
<p>InitHelloWorld2 çš„ä»£ç å¦‚ä¸‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import org.springframework.beans.BeansException;</span><br><span class="line">import org.springframework.beans.factory.config.BeanPostProcessor;</span><br><span class="line">import org.springframework.core.Ordered;</span><br><span class="line">public class InitHelloWorld2 implements BeanPostProcessor, Ordered &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException &#123;</span><br><span class="line">        System.out.println(&quot;B Before : &quot; + beanName);</span><br><span class="line">        return bean;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException &#123;</span><br><span class="line">        System.out.println(&quot;B After : &quot; + beanName);</span><br><span class="line">        return bean;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public int getOrder() &#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>beans.xml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;</span><br><span class="line">    &lt;bean id=&quot;helloWorld&quot; class=&quot;net.biancheng.HelloWorld&quot;</span><br><span class="line">        init-method=&quot;init&quot; destroy-method=&quot;destroy&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;message&quot; value=&quot;Hello Worldï¼&quot; /&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;!-- æ³¨å†Œå¤„ç†å™¨ --&gt;</span><br><span class="line">    &lt;bean class=&quot;net.biancheng.InitHelloWorld&quot; /&gt;</span><br><span class="line">    &lt;bean class=&quot;net.biancheng.InitHelloWorld2&quot; /&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<p>MainApp</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import org.springframework.context.support.AbstractApplicationContext;</span><br><span class="line">import org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line">public class MainApp &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        AbstractApplicationContext context = new ClassPathXmlApplicationContext(&quot;Beans.xml&quot;);</span><br><span class="line">        HelloWorld obj = (HelloWorld) context.getBean(&quot;helloWorld&quot;);</span><br><span class="line">        obj.getMessage();</span><br><span class="line">        context.registerShutdownHook();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">B Before : helloWorld</span><br><span class="line">A Before : helloWorld</span><br><span class="line">Beanæ­£åœ¨åˆå§‹åŒ–</span><br><span class="line">B After : helloWorld</span><br><span class="line">A After : helloWorld</span><br><span class="line">Message : Hello Worldï¼</span><br><span class="line">Beanå°†è¦è¢«é”€æ¯</span><br></pre></td></tr></table></figure>

<p>ç”±è¿è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼ŒpostProcessBeforeInitialization æ–¹æ³•æ˜¯åœ¨ Bean å®ä¾‹åŒ–å’Œä¾èµ–æ³¨å…¥åï¼Œè‡ªå®šä¹‰åˆå§‹åŒ–æ–¹æ³•å‰æ‰§è¡Œçš„ã€‚è€Œ postProcessAfterInitialization æ–¹æ³•æ˜¯åœ¨è‡ªå®šä¹‰åˆå§‹åŒ–æ–¹æ³•åæ‰§è¡Œçš„ã€‚ç”±äº getOrder æ–¹æ³•è¿”å›å€¼è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šä½ï¼Œæ‰€ä»¥ InitHelloWorld2 å…ˆæ‰§è¡Œã€‚</p>
</div></section><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong>é’æ‰</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://huafoog.github.io/p/d0d8b63c11ae.html" title="Spring IoC">https://huafoog.github.io/p/d0d8b63c11ae.html</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> è®¸å¯åè®®ã€‚</li></ul></article><div class="post-nav"><div class="post-nav-item"></div><div class="post-nav-item"><a class="post-nav-next" href="/p/3a850acdbcf5.html" rel="next" title="ä½¿ç”¨WorkServiceåˆ›å»ºå®šæ—¶ä»»åŠ¡"><span class="post-nav-text">ä½¿ç”¨WorkServiceåˆ›å»ºå®šæ—¶ä»»åŠ¡</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 â€“ 2022 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> é’æ‰</span></div><div class="powered"><span>ç”± <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> é©±åŠ¨ v6.2.0</span><span class="footer-separator">|</span><span>ä¸»é¢˜ - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.10.4</span></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a></body></html>